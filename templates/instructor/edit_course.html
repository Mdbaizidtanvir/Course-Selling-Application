{% extends 'base.html' %}

{% block title %}Edit Course: {{ course.title }} | LMS{% endblock %}

{% block content %}




<div class="container mx-auto px-4 py-8">
  <div class="bg-white rounded-2xl shadow-xl p-6 md:p-10 sticky top-6">
    <h1 class="text-2xl md:text-4xl font-bold mb-6 text-gray-900">Edit Course: {{ course.title }}</h1>

    <!-- Course Thumbnail -->
    <div class="relative w-full max-h-[400px] overflow-hidden rounded-lg shadow-lg mb-6">
      <img src="{{ course.thmb }}" alt="{{ course.title }}" class="w-full object-cover rounded-lg" />
      <!-- Play Button -->
      <button class="absolute inset-0 flex items-center justify-center">
        <div class="bg-black/50 hover:bg-black/60 p-4 rounded-full transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M14.752 11.168l-5.197-3.028A1 1 0 008 9.028v5.944a1 1 0 001.555.832l5.197-3.028a1 1 0 000-1.664z" />
          </svg>
        </div>
      </button>
    </div>

    {% if course.is_free %}
    <p class="text-sm text-green-600 font-bold uppercase mb-4">Free</p>
    {% else %}
    <h2 class="text-sm font-semibold text-gray-700 mb-4">
      PRICE:
      <span class="text-indigo-600 font-bold">${{ course.price }}</span>
    </h2>
    {% endif %}

    <!-- Modules Header -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mt-6 mb-4">
      <h2 class="text-lg font-bold uppercase text-gray-800">Course Modules</h2>
      <a href="{% url 'add_module' course.id %}"
        class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg text-sm font-semibold transition">
        + Add New Module
      </a>
    </div>

    <hr class="mb-6" />

    <!-- Modules & Lessons -->
    {% for module, lessons in modules_with_lessons %}
    <div class="bg-gray-50 rounded-xl border border-gray-200 p-5 mb-6">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-3">
        <h3 class="text-md font-semibold uppercase text-gray-700">{{ module.title }} (Order: {{ module.order }})</h3>
        <div class="flex gap-4 text-sm">
          <a href="{% url 'edit_module' module.id %}" class="text-yellow-600 hover:underline">Edit Module</a>
          <a href="{% url 'add_lesson' module.id %}" class="text-green-600 hover:underline">+ Add Lesson</a>
        </div>
      </div>

      {% if lessons %}
      <ul class="list-decimal space-y-1 pl-5 text-sm text-gray-700">
        {% for lesson in lessons %}
        <li class="uppercase">
          {{ lesson.title }} (Order: {{ lesson.order }})
          <a href="{% url 'edit_lesson' lesson.id %}" class="text-yellow-600 hover:underline ml-3">Edit Lesson</a>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="italic text-sm text-gray-500">No lessons added yet.</p>
      {% endif %}
    </div>
    {% empty %}
    <p class="text-sm text-gray-500">No modules added yet. Start by adding a new module above.</p>
    {% endfor %}
  </div>
</div>



{% endblock %}
